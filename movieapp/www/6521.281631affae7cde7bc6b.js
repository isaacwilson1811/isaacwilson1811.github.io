(self.webpackChunkmovieApp=self.webpackChunkmovieApp||[]).push([[6521],{6521:(e,t,i)=>{"use strict";i.r(t),i.d(t,{MyListModule:()=>v});var o=i(8945),n=i(8583),s=i(665),r=i(6476),c=i(4762),a=i(3018),l=i(5982),u=i(2169);let g=(()=>{class e{transform(e){let t=[];return e.forEach(e=>{t.push(e.name)}),t.toString().replace(/,/g,", ")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=a.Yjl({name:"customPipeGenreName",type:e,pure:!0}),e})();function d(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-card"),a.TgZ(1,"ion-card-header"),a._UZ(2,"img",6),a.TgZ(3,"ion-card-title"),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"ion-card-content"),a.TgZ(6,"ion-item",7),a._UZ(7,"ion-icon",8),a.TgZ(8,"ion-label",9),a._uU(9),a.ALo(10,"date"),a.qZA(),a.qZA(),a.TgZ(11,"ion-item",7),a._UZ(12,"ion-icon",10),a.TgZ(13,"ion-label",9),a._uU(14),a.ALo(15,"customPipeGenreName"),a.qZA(),a.qZA(),a.TgZ(16,"ion-list"),a.TgZ(17,"ion-item",7),a.TgZ(18,"ion-chip",11),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw(2).goToDetails(t.id)}),a._UZ(19,"ion-icon",12),a.TgZ(20,"ion-label"),a._uU(21,"Details"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(22,"ion-item",7),a.TgZ(23,"ion-chip",11),a.NdJ("click",function(){const t=a.CHM(e).index;return a.oxw(2).toggleHidden(t)}),a._UZ(24,"ion-icon",13),a.TgZ(25,"ion-label"),a._uU(26,"Custom Data"),a.qZA(),a._UZ(27,"ion-icon",14),a.qZA(),a.qZA(),a.TgZ(28,"ion-item",7),a.TgZ(29,"ion-chip",11),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw(2).removeMovie(t.id)}),a._UZ(30,"ion-icon",15),a.TgZ(31,"ion-label"),a._uU(32,"Remove"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(33,"ion-list",16),a.TgZ(34,"ion-list-header",17),a.TgZ(35,"ion-label"),a.TgZ(36,"h1"),a._uU(37,"My Custom Data"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(38,"ion-item"),a.TgZ(39,"ion-label"),a._uU(40,"Watched"),a.qZA(),a._UZ(41,"ion-checkbox",18,19),a.qZA(),a.TgZ(43,"ion-item"),a.TgZ(44,"ion-label"),a._uU(45,"Rating"),a.qZA(),a._UZ(46,"ion-input",20,21),a.qZA(),a.TgZ(48,"ion-item"),a.TgZ(49,"ion-label"),a._uU(50,"Comment"),a.qZA(),a._UZ(51,"ion-input",22,23),a.qZA(),a.TgZ(53,"ion-item"),a.TgZ(54,"ion-button",24),a.NdJ("click",function(){const t=a.CHM(e).$implicit,i=a.MAs(42),o=a.MAs(47),n=a.MAs(52);return a.oxw(2).saveCustomData(t.id,t,{userWatched:i.checked,userRating:o.value,userComment:n.value})}),a._uU(55,"Save Custom Data"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit,i=t.index;a.xp6(2),a.s9C("src","https://image.tmdb.org/t/p//w185"+e.poster_path,a.LSH),a.xp6(2),a.Oqu(e.title),a.xp6(5),a.Oqu(a.xi3(10,8,e.release_date,"MMMM d, y")),a.xp6(5),a.Oqu(a.lcZ(15,11,e.genres)),a.xp6(19),a.s9C("id",i),a.xp6(8),a.s9C("checked",e.userWatched),a.xp6(5),a.s9C("value",e.userRating),a.xp6(5),a.s9C("value",e.userComment)}}function Z(e,t){if(1&e&&(a.TgZ(0,"div"),a.YNc(1,d,56,13,"ion-card",5),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("ngForOf",e.userMovieList)}}function m(e,t){1&e&&a._uU(0," You must be logged in to use this feature ")}const p=[{path:"",component:(()=>{class e{constructor(e,t,i){this.storageService=e,this.firebaseService=t,this.router=i,this.pageTitle="My List"}ngOnInit(){this.isLoggedInLogic(),this.getUserMovies()}isLoggedInLogic(){this.isLoggedIn=!!this.storageService.read("isAuthed"),this.storageService.getObservableStorageChanges().subscribe(e=>{const{type:t,key:i,value:o}=e;"isAuthed"===i&&!0===o&&(this.isLoggedIn=!!o),"userCollection"===i&&"write"===t&&this.getUserMovies()})}sortBy(e,t){e&&e.sort((e,i)=>e[t]<i[t]?-1:e[t]>i[t]?1:0)}getUserMovies(){return(0,c.mG)(this,void 0,void 0,function*(){const e=yield this.storageService.read("userCollection");if(e)this.userMovieList=e,this.sortBy(this.userMovieList,"title"),console.log("loaded collection from storage");else{const e=yield this.firebaseService.readUserCollection();this.userMovieList=e,this.sortBy(this.userMovieList,"title"),console.log("loaded collection from firebase")}})}removeMovie(e){this.firebaseService.getCurrentUser().then(t=>{const i=t.uid;this.storageService.remove("userCollection"),this.firebaseService.removeFromCollection(i,`${e}`),this.getUserMovies()})}saveCustomData(e,t,i){this.firebaseService.getCurrentUser().then(o=>{const n=o.uid;this.storageService.remove("userCollection"),this.firebaseService.saveCustomData(n,`${e}`,t,i),this.getUserMovies()})}goToDetails(e){let t=this.storageService.read("userCollection").some(t=>t.id===e);this.router.navigate(["tabs","movies","details",`${e}`],{state:{isFound:t}})}toggleHidden(e){document.getElementById(e).classList.toggle("hidden")}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(l.u),a.Y36(u.O),a.Y36(r.F0))},e.\u0275cmp=a.Xpm({type:e,selectors:[["mylist-page"]],decls:8,vars:5,consts:[[3,"translucent"],[2,"text-align","center"],["padding","",3,"fullscreen"],[4,"ngIf","ngIfElse"],["notLoggedIn",""],[4,"ngFor","ngForOf"],["alt","Movie Poster",1,"moviePoster",3,"src"],["lines","none"],["name","calendar-clear","slot","start"],["text-wrap",""],["name","pricetags","slot","start"],[1,"chipButton",3,"click"],["name","list-circle-outline"],["name","create-outline"],["name","ellipsis-vertical-outline"],["name","trash-outline"],[1,"hidden",3,"id"],["lines","full"],["color","warning","slot","end",3,"checked"],["refWatched",""],["type","number","step","1","min","0","max","5","slot","end",3,"value"],["refRating",""],["type","text","slot","end",3,"value"],["refComment",""],["color","warning","shape","round",1,"center",3,"click"]],template:function(e,t){if(1&e&&(a.TgZ(0,"ion-header",0),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-title",1),a._uU(3),a.qZA(),a.qZA(),a.qZA(),a.TgZ(4,"ion-content",2),a.YNc(5,Z,2,1,"div",3),a.YNc(6,m,1,0,"ng-template",null,4,a.W1O),a.qZA()),2&e){const e=a.MAs(7);a.Q6J("translucent",!0),a.xp6(3),a.Oqu(t.pageTitle),a.xp6(1),a.Q6J("fullscreen",!0),a.xp6(1),a.Q6J("ngIf",!0===t.isLoggedIn)("ngIfElse",e)}},directives:[o.Gu,o.sr,o.wd,o.W2,n.O5,n.sg,o.PM,o.Zi,o.gZ,o.FN,o.Ie,o.gu,o.Q$,o.q_,o.hM,o.yh,o.nz,o.w,o.pK,o.as,o.j9,o.YG],pipes:[n.uU,g],styles:[".moviePoster[_ngcontent-%COMP%]{width:240px}.chipButton[_ngcontent-%COMP%]{background:rgba(241,181,15,.952)}.center[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block!important}.hidden[_ngcontent-%COMP%]{display:none}"]}),e})()}];let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[r.Bz.forChild(p)],r.Bz]}),e})(),v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[o.Pc,n.ez,s.u5,h]]}),e})()}}]);