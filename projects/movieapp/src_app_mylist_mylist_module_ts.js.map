{"version":3,"sources":["./src/app/mylist/custom-pipe/custom.pipe.ts","./src/app/mylist/mylist-routing.module.ts","./src/app/mylist/mylist.module.ts","./src/app/mylist/mylist.page.ts","./src/app/mylist/mylist.page.scss","./src/app/mylist/mylist.page.html"],"names":[],"mappings":"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","file":"src_app_mylist_mylist_module_ts.js","sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({name:'customPipeGenreName'})\nexport class CustomPipe implements PipeTransform{\n  \n  transform(genreObjArray: any[]): string {\n    let outputArray = [];\n    genreObjArray.forEach((genreObj)=>{outputArray.push(genreObj.name)});\n    return outputArray.toString().replace(/,/g, \", \");\n  }\n\n}","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { MyListPage } from './mylist.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MyListPage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class MyListRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { MyListRoutingModule } from './mylist-routing.module';\nimport { MyListPage } from './mylist.page';\nimport { CustomPipe } from './custom-pipe/custom.pipe';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    MyListRoutingModule\n  ],\n  declarations: [MyListPage, CustomPipe]\n})\nexport class MyListModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { SessionStorageService, StorageChangeAction } from '../app-global-services/session-storage.service';\nimport { FirebaseService } from '../app-global-services/firebase.service';\nimport { Router } from '@angular/router';import { DrawerService } from '../services/drawer.service';\n\n\n@Component({\n  selector: 'mylist-page',\n  templateUrl: 'mylist.page.html',\n  styleUrls: ['mylist.page.scss']\n})\nexport class MyListPage implements OnInit {\n  pageTitle = 'My List';\n  isLoggedIn: boolean;\n  // currentUserID: string;\n  userMovieList: any[] | void;\n  drawerService: any;\n\n  constructor(\n    private storageService: SessionStorageService,\n    private firebaseService: FirebaseService,\n    private router: Router\n  ) { }\n\n  ngOnInit() {\n    this.isLoggedInLogic();\n    this.getUserMovies();\n  }\n  \n  private isLoggedInLogic() {\n    this.isLoggedIn = this.storageService.read('isAuthed') ? true : false;\n    this.storageService.getObservableStorageChanges().subscribe((changeAction:StorageChangeAction) => {\n      const {type, key, value} = changeAction;\n      if(key === 'isAuthed' && value === true ){ this.isLoggedIn = value ? true : false }\n      if(key === 'userCollection' && type === 'write'){ \n        // this.userMovieList = this.storageService.read('userCollection');\n        this.getUserMovies();\n      };\n    });\n  }\n\n  private sortBy(arr: any[] | void, prop: string) {\n    if(!arr){return}\n    arr.sort( (a, b) => {\n      if (a[prop] < b[prop]) {return -1}\n      else if (a[prop] > b[prop]) {return 1}\n      else {return 0}\n    });\n  }\n\n  private async getUserMovies() {\n    const cachedUserCollection = await this.storageService.read('userCollection');\n    if (cachedUserCollection){\n      this.userMovieList = cachedUserCollection;\n      this.sortBy(this.userMovieList,'title');\n      console.log('loaded collection from storage');\n    }else {\n      const freshUserCollection = await this.firebaseService.readUserCollection();\n      this.userMovieList = freshUserCollection;\n      this.sortBy(this.userMovieList, 'title');\n      console.log('loaded collection from firebase');\n    }\n  }\n\n  public removeMovie(movieID:number) {\n    this.firebaseService.getCurrentUser().then( user => {\n      const uID = user.uid;\n      this.storageService.remove('userCollection');\n      this.firebaseService.removeFromCollection(uID, `${movieID}`);\n      this.getUserMovies();\n    });\n  }\n\n  public saveCustomData(movieID:number, movieData: any, customData:any) {\n    this.firebaseService.getCurrentUser().then( user => {\n      const uID = user.uid;\n      this.storageService.remove('userCollection');\n      this.firebaseService.saveCustomData(uID, `${movieID}`, movieData, customData);\n      this.getUserMovies();\n    });\n  }\n\n  public goToDetails(id: string) {\n    let userCollection = this.storageService.read('userCollection');\n    let found: boolean = userCollection.some(movie=> movie.id === id);\n    this.router.navigate(['tabs','movies','details',`${id}`], {state: {isFound:found} });\n  }\n\n  toggleHidden(id:any){\n    document.getElementById(id).classList.toggle('hidden')\n  }\n\n  \n}\n","export default \".moviePoster {\\n  width: 240px;\\n}\\n\\n.chipButton {\\n  background: rgba(241, 181, 15, 0.952);\\n}\\n\\n.center {\\n  margin-left: auto;\\n  margin-right: auto;\\n  display: block !important;\\n}\\n\\n.hidden {\\n  display: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm15bGlzdC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxZQUFBO0FBQ0o7O0FBQ0E7RUFDSSxxQ0FBQTtBQUVKOztBQU9BO0VBQ0ksaUJBQUE7RUFDQSxrQkFBQTtFQUNBLHlCQUFBO0FBSko7O0FBTUE7RUFDSSxhQUFBO0FBSEoiLCJmaWxlIjoibXlsaXN0LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tb3ZpZVBvc3RlciB7XG4gICAgd2lkdGg6IDI0MHB4O1xufVxuLmNoaXBCdXR0b24ge1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMjQxLCAxODEsIDE1LCAwLjk1Mik7XG4gICAgLy8gLS1pb24tY29sb3Itd2FybmluZzogI2ZmZDUzNDtcbiAgICAvLyAtLWlvbi1jb2xvci13YXJuaW5nLXJnYjogMjU1LDIxMyw1MjtcbiAgICAvLyAtLWlvbi1jb2xvci13YXJuaW5nLWNvbnRyYXN0OiAjMDAwMDAwO1xuICAgIC8vIC0taW9uLWNvbG9yLXdhcm5pbmctY29udHJhc3QtcmdiOiAwLDAsMDtcbiAgICAvLyAtLWlvbi1jb2xvci13YXJuaW5nLXNoYWRlOiAjZTBiYjJlO1xuICAgIC8vIC0taW9uLWNvbG9yLXdhcm5pbmctdGludDogI2ZmZDk0ODtcbiAgICBcbn1cbi5jZW50ZXIge1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50O1xufVxuLmhpZGRlbntcbiAgICBkaXNwbGF5Om5vbmU7XG59Il19 */\";","export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n\\n    <ion-title style=\\\"text-align: center\\\">{{pageTitle}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding [fullscreen]=\\\"true\\\">\\n\\n  <!-- <ion-header collapse=\\\"condense\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\">{{pageTitle}}</ion-title>\\n    </ion-toolbar>\\n  </ion-header> -->\\n\\n  <div *ngIf=\\\"isLoggedIn === true; else notLoggedIn\\\" >\\n    <ion-card *ngFor=\\\"let movie of userMovieList; let i = index\\\">\\n      <ion-card-header>\\n          <img class=\\\"moviePoster\\\" src=\\\"{{'https://image.tmdb.org/t/p//w185' + movie.poster_path }}\\\" alt=\\\"Movie Poster\\\">\\n        <ion-card-title>{{movie.title}}</ion-card-title>\\n      </ion-card-header>\\n      <ion-card-content>\\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon name=\\\"calendar-clear\\\" slot=\\\"start\\\"></ion-icon>\\n          <ion-label text-wrap>{{movie.release_date | date: 'MMMM d, y' }}</ion-label>\\n        </ion-item>\\n\\n        <ion-item lines=\\\"none\\\">\\n          <ion-icon name=\\\"pricetags\\\" slot=\\\"start\\\"></ion-icon>\\n          <ion-label text-wrap>{{movie.genres | customPipeGenreName }}</ion-label>\\n        </ion-item>\\n\\n        <ion-list>\\n          <ion-item lines=\\\"none\\\">\\n            <ion-chip class=\\\"chipButton\\\" (click)=\\\"goToDetails(movie.id)\\\">\\n              <ion-icon name=\\\"list-circle-outline\\\"></ion-icon>\\n              <ion-label>Details</ion-label>\\n            </ion-chip>\\n          </ion-item>\\n          <ion-item lines=\\\"none\\\" >\\n            <ion-chip class=\\\"chipButton\\\" (click)=\\\"toggleHidden(i)\\\">\\n              <ion-icon name=\\\"create-outline\\\"></ion-icon>\\n              <ion-label>Custom Data</ion-label>\\n              <ion-icon name=\\\"ellipsis-vertical-outline\\\" ></ion-icon>\\n            </ion-chip>\\n          </ion-item>\\n\\n          <ion-item lines=\\\"none\\\">\\n            <ion-chip class=\\\"chipButton\\\" (click)=\\\"removeMovie(movie.id)\\\">\\n\\n              <ion-icon name=\\\"trash-outline\\\" ></ion-icon>\\n              <ion-label>Remove</ion-label>\\n            </ion-chip>\\n          </ion-item>\\n        </ion-list>\\n\\n        <!-- Custom Data -->\\n\\n        <ion-list id=\\\"{{i}}\\\" class=\\\"hidden\\\">\\n          <ion-list-header lines=\\\"full\\\">\\n            <ion-label><h1>My Custom Data</h1></ion-label>\\n          </ion-list-header>\\n          <ion-item>\\n            <ion-label>Watched</ion-label>\\n            <ion-checkbox #refWatched checked=\\\"{{movie.userWatched}}\\\" color=\\\"warning\\\" slot=\\\"end\\\"></ion-checkbox>\\n          </ion-item>\\n          <ion-item>\\n            <ion-label>Rating</ion-label>\\n            <ion-input #refRating type=\\\"number\\\" step=\\\"1\\\" min=\\\"0\\\" max=\\\"5\\\" value=\\\"{{movie.userRating}}\\\" slot=\\\"end\\\"></ion-input>\\n          </ion-item>\\n          <ion-item>\\n            <ion-label>Comment</ion-label>\\n            <ion-input #refComment type=\\\"text\\\" value=\\\"{{movie.userComment}}\\\" slot=\\\"end\\\"></ion-input>\\n          </ion-item>\\n          <ion-item> \\n            <ion-button class=\\\"center\\\" color=\\\"warning\\\" shape=\\\"round\\\" (click)=\\\"saveCustomData(movie.id, movie, { userWatched: refWatched.checked, userRating: refRating.value, userComment: refComment.value})\\\">Save Custom Data</ion-button>\\n          </ion-item>\\n        </ion-list>\\n        <!-- <pre>{{ movie | json }}</pre> -->\\n      </ion-card-content>\\n    </ion-card>\\n  </div>\\n\\n  <ng-template #notLoggedIn>\\n    You must be logged in to use this feature\\n  </ng-template>\\n  \\n</ion-content>\\n\\n\";"],"sourceRoot":"webpack:///"}