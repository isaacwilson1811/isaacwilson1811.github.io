(self.webpackChunkmovieApp=self.webpackChunkmovieApp||[]).push([[2069],{2069:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ProfileModule:()=>_});var o=r(8945),i=r(6476),s=r(8583),n=r(665),g=r(3018),a=r(2169),c=r(5982);function u(e,t){if(1&e&&(g.TgZ(0,"div"),g._uU(1),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.hij(" ",e.message," ")}}function l(e,t){if(1&e&&(g.ynx(0),g.YNc(1,u,2,1,"div",8),g.BQk()),2&e){const e=t.$implicit,r=g.oxw();g.xp6(1),g.Q6J("ngIf",r.userForm.get("email").hasError(e.type)&&(r.userForm.get("email").dirty||r.userForm.get("email").touched))}}function p(e,t){if(1&e&&(g.TgZ(0,"div"),g._uU(1),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.hij(" ",e.message," ")}}function m(e,t){if(1&e&&(g.ynx(0),g.YNc(1,p,2,1,"div",8),g.BQk()),2&e){const e=t.$implicit,r=g.oxw();g.xp6(1),g.Q6J("ngIf",r.userForm.get("password").hasError(e.type)&&(r.userForm.get("password").dirty||r.userForm.get("password").touched))}}let d=(()=>{class e{constructor(e,t,r){this.router=e,this.authService=t,this.formBuilder=r,this.successMsg="",this.errorMsg="",this.error_msg={email:[{type:"required",message:"Provide email."},{type:"pattern",message:"Email is not valid."}],password:[{type:"required",message:"Password is required."},{type:"minlength",message:"Password length should be 6 characters long."}]}}ngOnInit(){this.userForm=this.formBuilder.group({email:new n.NI("",n.kI.compose([n.kI.required,n.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new n.NI("",n.kI.compose([n.kI.minLength(6),n.kI.required]))})}signIn(e){this.authService.signinUser(e).then(e=>{this.errorMsg=""},e=>{this.errorMsg=e.message,this.successMsg=""})}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(i.F0),g.Y36(a.O),g.Y36(n.qu))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-login-form"]],decls:19,vars:5,consts:[[1,"form",3,"formGroup","ngSubmit"],[2,"text-align","center"],["position","floating"],["type","text","formControlName","email"],[4,"ngFor","ngForOf"],["type","password","formControlName","password","required","",1,"form-controll"],["color","warning","type","submit","expand","block","shape","round",3,"disabled"],["color","danger",1,"ion-text-center"],[4,"ngIf"]],template:function(e,t){1&e&&(g.TgZ(0,"form",0),g.NdJ("ngSubmit",function(){return t.signIn(t.userForm.value)}),g.TgZ(1,"ion-card-header"),g.TgZ(2,"ion-card-title",1),g._uU(3,"Log in"),g.qZA(),g.qZA(),g.TgZ(4,"ion-card-content"),g.TgZ(5,"ion-item"),g.TgZ(6,"ion-label",2),g._uU(7,"Email"),g.qZA(),g._UZ(8,"ion-input",3),g.qZA(),g.YNc(9,l,2,1,"ng-container",4),g.TgZ(10,"ion-item"),g.TgZ(11,"ion-label",2),g._uU(12,"Password"),g.qZA(),g._UZ(13,"ion-input",5),g.qZA(),g.YNc(14,m,2,1,"ng-container",4),g.TgZ(15,"ion-button",6),g._uU(16,"Log In"),g.qZA(),g.qZA(),g.TgZ(17,"label",7),g._uU(18),g.qZA(),g.qZA()),2&e&&(g.Q6J("formGroup",t.userForm),g.xp6(9),g.Q6J("ngForOf",t.error_msg.email),g.xp6(5),g.Q6J("ngForOf",t.error_msg.password),g.xp6(1),g.Q6J("disabled",!t.userForm.valid),g.xp6(3),g.Oqu(t.errorMsg))},directives:[n._Y,n.JL,n.sg,o.Zi,o.gZ,o.FN,o.Ie,o.Q$,o.pK,o.j9,n.JJ,n.u,s.sg,n.Q7,o.YG,s.O5],styles:[".form[_ngcontent-%COMP%]{width:310px;height:300px}"]}),e})();function Z(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"ion-list"),g.TgZ(1,"ion-item"),g.TgZ(2,"ion-label"),g._uU(3,"You are logged in as:"),g.qZA(),g.qZA(),g.TgZ(4,"ion-item"),g.TgZ(5,"ion-label"),g._uU(6),g.qZA(),g.qZA(),g.TgZ(7,"ion-item"),g.TgZ(8,"ion-button",5),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).logout()}),g._uU(9,"Log Out"),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=t.ngIf;g.xp6(6),g.Oqu(e.email)}}function f(e,t){if(1&e&&(g.TgZ(0,"div"),g.YNc(1,Z,10,1,"ion-list",4),g.ALo(2,"async"),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngIf",g.lcZ(2,1,e.userDetails$))}}function h(e,t){if(1&e){const e=g.EpF();g._UZ(0,"app-login-form"),g.TgZ(1,"ion-button",6),g.NdJ("click",function(){return g.CHM(e),g.oxw().goToRegister()}),g._uU(2,"Register"),g.qZA()}}let q=(()=>{class e{constructor(e,t,r){this.router=e,this.auth=t,this.storageService=r,this.pageTitle="My Profile"}ngOnInit(){this.isLoggedInLogic(),this.userDetails$=this.auth.getUserDetails()}logout(){this.auth.signoutUser()}isLoggedInLogic(){this.isLoggedIn=!!this.storageService.read("isAuthed"),this.storageService.getObservableStorageChanges().subscribe(e=>{const{key:t,value:r}=e;"isAuthed"===t&&(this.isLoggedIn=!!r)})}goToRegister(){this.router.navigateByUrl("tabs/profile/register")}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(i.F0),g.Y36(a.O),g.Y36(c.u))},e.\u0275cmp=g.Xpm({type:e,selectors:[["profile-page"]],decls:6,vars:3,consts:[[3,"fullscreen"],[1,"flex-center"],[4,"ngIf","ngIfElse"],["loginForm",""],[4,"ngIf"],["color","warning","slot","end",3,"click"],["fill","clear","expand","block","shape","round",1,"darkYellowText",3,"click"]],template:function(e,t){if(1&e&&(g.TgZ(0,"ion-content",0),g.TgZ(1,"div",1),g.TgZ(2,"ion-card"),g.YNc(3,f,3,3,"div",2),g.YNc(4,h,3,0,"ng-template",null,3,g.W1O),g.qZA(),g.qZA(),g.qZA()),2&e){const e=g.MAs(5);g.Q6J("fullscreen",!0),g.xp6(3),g.Q6J("ngIf",!0===t.isLoggedIn)("ngIfElse",e)}},directives:[o.W2,o.PM,s.O5,o.q_,o.Ie,o.Q$,o.YG,d],pipes:[s.Ov],styles:[".flex-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}ion-content[_ngcontent-%COMP%]{--background:none;background:url(background.d8be64dacc4d70a054f5.jpg) no-repeat fixed 50%;background-size:cover}.darkYellowText[_ngcontent-%COMP%]{color:#c46b06}"]}),e})();function A(e,t){if(1&e&&(g.TgZ(0,"div"),g._uU(1),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.hij(" ",e.message," ")}}function x(e,t){if(1&e&&(g.ynx(0),g.YNc(1,A,2,1,"div",14),g.BQk()),2&e){const e=t.$implicit,r=g.oxw();g.xp6(1),g.Q6J("ngIf",r.userForm.get("email").hasError(e.type)&&(r.userForm.get("email").dirty||r.userForm.get("email").touched))}}function w(e,t){if(1&e&&(g.TgZ(0,"div"),g._uU(1),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.hij(" ",e.message," ")}}function T(e,t){if(1&e&&(g.ynx(0),g.YNc(1,w,2,1,"div",14),g.BQk()),2&e){const e=t.$implicit,r=g.oxw();g.xp6(1),g.Q6J("ngIf",r.userForm.get("password").hasError(e.type)&&(r.userForm.get("password").dirty||r.userForm.get("password").touched))}}let b=(()=>{class e{constructor(e,t,r){this.router=e,this.authService=t,this.formBuilder=r,this.pageTitle="Register New User",this.successMsg="",this.errorMsg="",this.error_msg={email:[{type:"required",message:"Provide email."},{type:"pattern",message:"Email is not valid."}],password:[{type:"required",message:"Password is required."},{type:"minlength",message:"Password length should be 6 characters long."}]}}ngOnInit(){this.userForm=this.formBuilder.group({email:new n.NI("",n.kI.compose([n.kI.required,n.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),password:new n.NI("",n.kI.compose([n.kI.minLength(6),n.kI.required]))})}signUp(e){this.authService.createUser(e).then(t=>{this.errorMsg="",this.successMsg="New user created.",this.authService.signinNewUser(e).then(e=>{this.errorMsg="",this.router.navigateByUrl("tabs/profile")},e=>{this.errorMsg=e.message,this.successMsg=""})},e=>{this.errorMsg=e.message,this.successMsg=""})}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(i.F0),g.Y36(a.O),g.Y36(n.qu))},e.\u0275cmp=g.Xpm({type:e,selectors:[["register-page"]],decls:34,vars:10,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],["collapse","condense"],["size","large"],[2,"text-align","center"],[1,"form",3,"formGroup","ngSubmit"],["position","floating"],["type","text","formControlName","email"],[4,"ngFor","ngForOf"],["type","password","formControlName","password","required","",1,"form-controll"],["type","submit","expand","block","shape","round","color","warning",3,"disabled"],["color","danger",1,"ion-text-center"],["color","success",1,"ion-text-center"],[4,"ngIf"]],template:function(e,t){1&e&&(g.TgZ(0,"ion-header",0),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",1),g._UZ(3,"ion-back-button"),g.qZA(),g.TgZ(4,"ion-title"),g._uU(5),g.qZA(),g.qZA(),g.qZA(),g.TgZ(6,"ion-content",2),g.TgZ(7,"ion-header",3),g.TgZ(8,"ion-toolbar"),g.TgZ(9,"ion-buttons",1),g._UZ(10,"ion-back-button"),g.qZA(),g.TgZ(11,"ion-title",4),g._uU(12),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"div"),g.TgZ(14,"ion-item"),g.TgZ(15,"ion-label",5),g._uU(16,"Please Enter Your Information"),g.qZA(),g.qZA(),g.TgZ(17,"form",6),g.NdJ("ngSubmit",function(){return t.signUp(t.userForm.value)}),g.TgZ(18,"ion-item"),g.TgZ(19,"ion-label",7),g._uU(20,"Email"),g.qZA(),g._UZ(21,"ion-input",8),g.qZA(),g.YNc(22,x,2,1,"ng-container",9),g.TgZ(23,"ion-item"),g.TgZ(24,"ion-label",7),g._uU(25,"Password"),g.qZA(),g._UZ(26,"ion-input",10),g.qZA(),g.YNc(27,T,2,1,"ng-container",9),g.TgZ(28,"ion-button",11),g._uU(29,"Create Profile"),g.qZA(),g.TgZ(30,"label",12),g._uU(31),g.qZA(),g.TgZ(32,"label",13),g._uU(33),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.Q6J("translucent",!0),g.xp6(5),g.Oqu(t.pageTitle),g.xp6(1),g.Q6J("fullscreen",!0),g.xp6(6),g.Oqu(t.pageTitle),g.xp6(5),g.Q6J("formGroup",t.userForm),g.xp6(5),g.Q6J("ngForOf",t.error_msg.email),g.xp6(5),g.Q6J("ngForOf",t.error_msg.password),g.xp6(1),g.Q6J("disabled",!t.userForm.valid),g.xp6(3),g.Oqu(t.errorMsg),g.xp6(2),g.Oqu(t.successMsg))},directives:[o.Gu,o.sr,o.Sm,o.oU,o.cs,o.wd,o.W2,o.Ie,o.Q$,n._Y,n.JL,n.sg,o.pK,o.j9,n.JJ,n.u,s.sg,n.Q7,o.YG,s.O5],styles:[""]}),e})();const I=[{path:"",component:q},{path:"register",component:b}];let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[i.Bz.forChild(I)],i.Bz]}),e})(),_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[o.Pc,s.ez,n.u5,n.UX,v,i.Bz.forChild([{path:"",component:q},{path:"register",component:b}])]]}),e})()}}]);